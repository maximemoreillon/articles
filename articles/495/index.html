<!DOCTYPE html>
<html lang="en-us"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name">User management and authentication service using MongoDB | Maxime Moreillon</title>
<meta property="og:title" content="User management and authentication service using MongoDB | Maxime Moreillon" />
<meta name="twitter:title" content="User management and authentication service using MongoDB | Maxime Moreillon" />
<meta itemprop="name" content="User management and authentication service using MongoDB | Maxime Moreillon" />
<meta name="application-name" content="User management and authentication service using MongoDB | Maxime Moreillon" />
<meta property="og:site_name" content="" />

<meta name="description" content="">
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />

  <link rel="alternate" hreflang="en" href="https://articles.maximemoreillon.com/articles/495/" title="" />






<meta name="generator" content="Hugo 0.147.8">

    
    <meta property="og:url" content="https://articles.maximemoreillon.com/articles/495/">
  <meta property="og:site_name" content="Maxime Moreillon">
  <meta property="og:title" content="User management and authentication service using MongoDB">
  <meta property="og:description" content="More often than not, web applications require restrictions regarding who can access the content that they serve. This involves an user management and authentication system, which, if designed inappropriately, can lead to security concerns. However, the development of such system can be time consuming, especially if done repeatedly for multiple applications.
To solve this problem, this article presents a user management and authentication service, built around MongoDB, that can be easily plugged into an existing application with only minimal refactoring.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="articles">
    <meta property="article:published_time" content="2021-09-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-09-20T00:00:00+00:00">
    <meta property="article:tag" content="Featured">
    <meta property="article:tag" content="Node.js">
    <meta property="article:tag" content="Mongoose">
    <meta property="article:tag" content="MongoDB">
    <meta property="article:tag" content="Docker">
    <meta property="article:tag" content="Security">


    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="User management and authentication service using MongoDB">
  <meta name="twitter:description" content="More often than not, web applications require restrictions regarding who can access the content that they serve. This involves an user management and authentication system, which, if designed inappropriately, can lead to security concerns. However, the development of such system can be time consuming, especially if done repeatedly for multiple applications.
To solve this problem, this article presents a user management and authentication service, built around MongoDB, that can be easily plugged into an existing application with only minimal refactoring.">


    

    <link rel="canonical" href="https://articles.maximemoreillon.com/articles/495/">
    <link href="/style.min.e390ba7da26222f4dc42a349955d76dbbe44e5ce2535a43de5a70633a0a9ec3c.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="https://articles.maximemoreillon.com/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">
    <meta name="color-scheme" content="light dark">

    
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

    
    
    
</head>
<body data-theme = "" class="notransition">

<script src="/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js" integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="https://articles.maximemoreillon.com/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title></title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/">
                        Home
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link active" href="/articles/">
                        Articles
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/tags/">
                        Tags
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
                
                
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title">User management and authentication service using MongoDB</h1>
                
                
                
                <div class="post-meta">
                    <time datetime="2021-09-20T00:00:00&#43;00:00" itemprop="datePublished"> Sep 20, 2021 </time>
                </div>
                
            </header>
            
            <div class="page-content">
                <p>More often than not, web applications require restrictions regarding who can access the content that they serve. This involves an user management and authentication system, which, if designed inappropriately, can lead to security concerns. However, the development of such system can be time consuming, especially if done repeatedly for multiple applications.</p>
<p>To solve this problem, this article presents a user management and authentication service, built around MongoDB, that can be easily plugged into an existing application with only minimal refactoring.</p>
<p>Additionally, this article introduces middleware for Express and Vue that facilitate the integration of the service into existing applications.</p>
<p><strong>An example application</strong></p>
<p>Let’s imagine a simple Express application which serves <code>Sensitive data</code> upon receiving an HTTP GET requests on the <em>/data</em> endpoint:</p>
<pre tabindex="0"><code>const express = require(&#39;express&#39;)
const cors = require(&#39;cors&#39;)const app = express()
const port =  7070

app.use(cors())app.get(&#39;/data&#39;, (req, res) =&gt; res.send(`Sensitive data`))app.listen(port, () =&gt; console.log(`App listening on :${port}`))
</code></pre><p>As an example front-end, we’ll use a simple Vue application which uses <a href="https://www.npmjs.com/package/vue-axios">vue-axios</a> to retrieve the aforementioned data from the back-end:</p>
<pre tabindex="0"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;My app&lt;/h1&gt;
    &lt;p&gt;{{message}}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;&lt;script&gt;
export default {
  name: &#39;App&#39;,
  data: () =&gt; ({ message: &#39;Loading...&#39; }),
  mounted(){
    this.get_data()
  },
  methods: {
    get_data(){
      this.axios.get(&#39;http://YOUR_SERVER_IP:7070/data&#39;)
      .then( ({data}) =&gt; { this.message = data } )
      .catch( error =&gt; { this.message = error } )
    }
  },
}
&lt;/script&gt;
</code></pre><p>With such a simple setup, it comes to no surprise that our front-end application is able to display the back-end’s <code>Sensitive data</code> whether the user is authenticated or not:</p>
<p><img src="https://miro.medium.com/max/261/1*eubvoN4ZHHtRHsi9BfvrAw.png" alt=""></p>
<p>Without any authentication mechanism, the front-end can freely retrieve the back-end’s sensitive data</p>
<p>Here, one way to implement access restrictions would be to build an authentication system from the ground up, but having to do so for every application would be tedious. Instead, we’ll deploy our pluggable authentication system to handle the task.</p>
<p><strong>The user management and authentication service</strong></p>
<p>The user management and authentication service comes in four parts:</p>
<ul>
<li>A MongoDB database to store users</li>
<li>The <a href="https://github.com/maximemoreillon/user_manager_mongoose">user management service</a> itself, which interacts with the database</li>
<li>A <a href="https://github.com/maximemoreillon/user_manager_mongoose_front">GUI for the service</a> to interact with the server-side application</li>
<li>A <a href="https://github.com/maximemoreillon/api_proxy">reverse proxy</a> to appropriately tie the GUI and the back-end together</li>
</ul>
<p>All three are packaged as docker containers and can thus be easily deployed using the following <em>docker-compose.yml</em> file:</p>
<pre tabindex="0"><code>version: &#34;3.7&#34;services:
  mongo:
    image: mongo
    logging:
      driver: noneuser-manager-api:
    image: moreillon/user-manager-mongoose
    environment:
      MONGODB_URL: mongodb://mongo
      JWT_SECRET: keyboard_cat
    ports:
      - &#34;7071:80&#34;user-manager-front:
    image: moreillon/user-manager-mongoose-front
    logging:
      driver: none
    environment:
      VUE_APP_USER_MANAGER_API_URL: /proxy/apiuser-manager-front-proxy:
    image: moreillon/api-proxy
    environment:
      PROXY_API: http://user-manager-api
      PROXY_ROOT: http://user-manager-front
    ports:
      - &#34;8081:80&#34;
</code></pre><p>Note the JWT_SECRET environment variable that users will want to set to a secret of their choice. Also, the MONGODB_URL environment variable can be changed so as to use another MongoDB instance.</p>
<p>After deployment using the <code>docker-compose up</code> command, the service should be deployed. Its back-end API is available on port 7071 while pointing your browser to port 8081 of your server should present you with the following login screen:</p>
<p><img src="https://miro.medium.com/max/639/1*Sh0ou59AfLrEjOXBEMem0A.png" alt=""></p>
<p>The login screen of the user management service</p>
<p>Although modifiable via environment variables, the default username and password are both <em>admin.</em></p>
<p>A successful login will allow access to the user list, which would originally only contain only the admin user:</p>
<p><img src="https://miro.medium.com/max/639/1*0t946JFYR6SamYcPOAkhmA.png" alt=""></p>
<p>The user list view of the user management service</p>
<p>More often than not, content is to be serves to multiple users. Accounts for those users can be created using the corresponding button. In this example, we’ll create the user <em>roger.</em></p>
<p><img src="https://miro.medium.com/max/656/1*ycaS4gkoOWxM8eV5eV2EEQ.png" alt=""></p>
<p>Creation of the user roger</p>
<p>Creating a user only requires a username and a password. Once created, the user appears in the user list.</p>
<p><img src="https://miro.medium.com/max/638/1*gcFXiWEjm-rxPNULpLtSEQ.png" alt=""></p>
<p>The newly created user (roger) appearing in the user list</p>
<p>Further configuration of a user can be done by clicking on the corresponding row of the user table. Options include granting administrator rights which provides the user with the ability to create and delete users.</p>
<p><strong>Integration with the existing application</strong></p>
<p>Now that the user management service is deployed, our example application needs to be updated so as to use the former for authentication. This involves connecting the both the back-end and the front end of our example application to the user management service’s server-side application.</p>
<h2 id="back-end-integration"><strong>Back-end integration</strong></h2>
<p>We will start with the back-end integration. Here the objective is to prevent unauthenticated usersfrom accessing retriving data from the <em>/data</em> endpoint. For Express applications, <a href="https://github.com/maximemoreillon/express_identification_middleware">a dedicated module</a> has been developed and can be installed via NPM:</p>
<pre tabindex="0"><code>npm install @moreillon/express_identification_middleware
</code></pre><p>Once downloaded, our back-end code can be refactored so as to use the module as an express middleware:</p>
<pre tabindex="0"><code>const express = require(&#39;express&#39;)
const cors = require(&#39;cors&#39;)
const auth = require(&#39;@moreillon/express_identification_middleware&#39;)const app = express()
const port =  7070const auth_options = {url: &#39;http://YOUR_SERVER_IP:7071&#39;}app.use(cors())
app.use(auth(auth_options))app.listen(port, () =&gt; console.log(`App listening on :${port}`) )
</code></pre><p>Note here that the middleware takes the url of the user management service as parameter. Technical details about this package are omitted for the sake of brevity.</p>
<p>With this done, the front-end should no longer be able to display the <code>Sensitive data</code> from the <em>/data</em> endpoint and return a 403 (forbidden) error code instead:</p>
<p><img src="https://miro.medium.com/max/571/1*icmAjhmWnkUfC03kGWR18g.png" alt=""></p>
<p>The front-end after authentication has been implemented in the back-end</p>
<h2 id="front-end-integration"><strong>Front-end integration</strong></h2>
<p>Now that the data is restricted to authenticated users on the back-end, it is time to provide our front-end with means of authenticating users.</p>
<p>Here again, <a href="https://github.com/maximemoreillon/vue_authentication_wall">a dedicated front-end module</a> has been developed for this purpose. It can be installed using NPM as follows:</p>
<pre tabindex="0"><code>npm install @moreillon/vue_authentication_wall
</code></pre><p>This package provides the <code>AuthenticationWall</code> component, which, as it names suggests, places itself between unauthenticated users and the application content. Here again, technical details about the package are omitted. The usage of the component is fairly straightforward. It wraps the application content as such:</p>
<pre tabindex="0"><code>&lt;template&gt;
  &lt;AuthenticationWall
    :options=&#34;wall_options&#34;
    @user=&#34;get_data()&#34;&gt;    &lt;div&gt;
      &lt;h1&gt;My app&lt;/h1&gt;
      &lt;p&gt;{{message}}&lt;/p&gt;
    &lt;/div&gt;  &lt;/AuthenticationWall&gt;
&lt;/template&gt;&lt;script&gt;
import AuthenticationWall from &#39;@moreillon/vue_authentication_wall_vuetify&#39;export default {
  name: &#39;App&#39;,
  components: { AuthenticationWall },
  data(){
    return {
      message: &#34;&#34;,
      options: {
        login_url: &#39;http://YOUR_SERVER_IP:7071/auth/login&#39;,
        identification_url: &#39;http://YOUR_SERVER_IP:7071/users/self&#39;,
      }
    }
  },
  mounted(){
    // get_data() call moved to @user event of AuthenticationWall
  },
  methods: {
    get_data(){
      this.axios.get(&#39;http://YOUR_SERVER_IP:7070/data&#39;)
      .then( ({data}) =&gt; { this.message = data } )
      .catch( error =&gt; { this.message = error } )
    }
  },
}
&lt;/script&gt;
</code></pre><p>Note how the <code>AuthenticationWall</code> needs to be made aware of the user management service’s API URL for login and authentication. This is done using the <code>options</code> prop.</p>
<p>Also, the call of <code>get_data()</code> has been moved from <code>mounted()</code> to a custom event emitted by the authentication module, which allows the API call to be delayed until the user is properly authenticated.</p>
<p>With the authentication module installed, clients accessing the front-end should be presented with the following login page:</p>
<p><img src="https://miro.medium.com/max/453/1*77aQzdOfijI8hUDBzEcLrw.png" alt=""></p>
<p>The login interface of the authentication module</p>
<p>Here, one can log in using any user account listed in the user management service, such as the <em>roger</em> user previously created. Upon successful login, the back-end data is finally visible to the user.</p>
<p><img src="https://miro.medium.com/max/261/1*eubvoN4ZHHtRHsi9BfvrAw.png" alt=""></p>
<p>The back-end data visible to clients after successful login</p>
<p><strong>Conclusion</strong></p>
<p>With the user management service and integration modules presented in this article, authentication can be easily implemented in existing applications, which allows developers to focus their time and energy on the actual content of their project.</p>
<p>A working example of the service presented in this article is available on GitHub <a href="https://github.com/maximemoreillon/authentication_example">here</a>.</p>
<p>Links and references</p>
<p>This article has also been posted to <a href="https://moreillon.medium.com/a-pluggable-user-management-and-authentication-service-for-web-applications-a6f23ae5816b">Medium</a></p>

            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
</div>
    <small class="footer_copyright">
        © 2025 Maxime Moreillon.
        
    </small>
</footer>







    
    <script src="https://articles.maximemoreillon.com/js/main.min.4ee188e1744c19816e95a540b2650ed9f033ea0371e74eac8e717355cfca8741.js" integrity="sha256-TuGI4XRMGYFulaVAsmUO2fAz6gNx506sjnFzVc/Kh0E="></script>

    

</body>
</html>
