+++
title = "IoT sensor module"
date = '2022-07-11'
lastmod = '2022-12-27'
tags = ['ESP8266', 'Arduino', 'IoT', 'Electronics', 'MQTT', 'PCB design']
+++

Although a wide variety of sensing devices can be envisioned for home automation systems, motion and temperature sensors are among the most widespread. This is mostly due to their low cost and simplicity of use. In order to equip multiple rooms of my apartment with such sensors, I designed a simple IoT sensing module that can easily be produced in any quantity.

The module is designed around an Wemos D1 mini (ESP8266 module) which interfaces with a HC-SR501 PIR motion sensor and Dallas DS18B20 temperature sensor. Additionally, since the Wemos still had a lot of available pins available, I added a photoresistor to measure illuminance.

Here is the schematic:

![](https://img.maximemoreillon.com/images/62cc117f3bbcbadc1677cd82)

I designed a PCB for which I ordered the fabrication from JLCPCB. Here is the assembled product:

![](https://img.maximemoreillon.com/images/62cc0a553bbcba037377cd5d)

More details on the hardware can be found on [OSHWLab](https://oshwlab.com/m.moreillon/iot-sensor-module)

The ESP8266 runs a homemade firmware, written as an Arduino sketch, which handles wifi and publishes measurements over MQTT. Its source code is available on [GitHub](https://github.com/maximemoreillon/iot-sensor-module).